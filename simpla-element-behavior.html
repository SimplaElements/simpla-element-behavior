<script>"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},DEFAULT_CONFIG={getCallback:"_updateFromSimpla",setCallback:"_updateSimplaBuffer",updateOn:[]},ERRORS={NO_SIMPLA:"Cannot find Simpla, ensure it is included before this component"};window.SimplaBehaviors=window.SimplaBehaviors||{},SimplaBehaviors.Element={properties:{path:{type:String,observer:"_initSimplaPath"},editable:{type:Boolean,notify:!0},loaded:{type:Boolean,readOnly:!0,notify:!0,value:!1},__simplaObservers:{type:Object,value:function(){return{}}}},created:function(){if(!window.Simpla)throw new Error(ERRORS.NO_SIMPLA)},attached:function(){var e=this,t=this.__simplaConfig,i=t.dataProperties,a=t.updateOn,s=t.setCallback;i.forEach(function(t){e._addObserverEffect(t,s)}),a.forEach(function(t){e.listen(e,t,s)}),this.editable=this.editable||Simpla.getState("editable"),this._observeSimplaEditable()},detached:function(){var e=this;Object.keys(this.__simplaObservers).forEach(function(t){e.__simplaObservers[t].unobserve()}),this.__simplaObservers={}},setupSimpla:function(e){this.__simplaConfig=_extends({},DEFAULT_CONFIG,e)},_initSimplaPath:function(e){var t=this,i=this.__simplaConfig.getCallback;this._setLoaded(!1),Simpla.get(e).then(function(a){a&&a.data&&e===a.path&&(t[i](a),t._setLoaded(!0))}),this._observeSimplaBuffer(e)},_observeSimplaBuffer:function(e){var t=this,i=this.__simplaObservers,a=this.__simplaConfig.getCallback;e&&(i.buffer&&i.buffer.unobserve(),i.buffer=Simpla.observe(e,function(i){i&&i.data&&e===i.path&&t[a](i)}))},_updateSimplaBuffer:function(){var e=this,t=this.__simplaConfig,i=t.type,a=t.dataProperties,s={};if(a.forEach(function(t){return s[t]=e[t]}),this.path)return Simpla.set(this.path,{type:i,data:s})},_updateFromSimpla:function(e){_extends(this,e.data)},_observeSimplaEditable:function(){var e=this,t=this.__simplaObservers;t.editable&&t.editable.unobserve(),t.editable=Simpla.observeState("editable",function(t){e.editable=t})}}</script> 